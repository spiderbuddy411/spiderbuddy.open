<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_core_admin_customization extends \\IPS\\Theme\\Template\n{\n\t\t\tfunction diff( $skinSet, $diff ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<p class=\"ipsMessage ipsMessage_info\">\nCONTENT;\n\n$sprintf = array($skinSet->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'core_theme_set_diff_desc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/p>\n<div class=\"acpBlock\">\n\t\nCONTENT;\n\nforeach ( $diff['templates'] as $app => $appData ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nforeach ( $appData as $location => $locationData ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nforeach ( $locationData as $group => $groupData ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nforeach ( $groupData as $name => $template ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class=\"acpBlock_title\">\n\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $template['template_app'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $template['template_location'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $template['template_group'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $template['template_name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $template['added'] === true ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<span class='ipsBadge ipsBadge_positive'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'core_theme_set_template_new', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<span>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $template['deleted'] === true ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<span class='ipsBadge ipsBadge_warning'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'core_theme_set_template_deleted', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<span>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nif ( isset($template['oldHumanVersion']) AND isset($template['newHumanVersion']) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<table class=\"ipsTable diff restrict_height\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th><span>\nCONTENT;\n$return .= htmlspecialchars( $template['oldHumanVersion'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span><\/th>\n\t\t\t\t\t\t\t<th><span>\nCONTENT;\n$return .= htmlspecialchars( $template['newHumanVersion'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span><\/th>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<\/table>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{$template['diff']}\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\n\t\nCONTENT;\n\nforeach ( $diff['css'] as $app => $appData ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nforeach ( $appData as $location => $locationData ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nforeach ( $locationData as $group => $pathData ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nforeach ( $pathData as $name => $css ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class=\"acpBlock_title\">\n\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $css['css_app'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $css['css_location'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $css['css_path'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $css['css_name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $css['added'] === true ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<span class='ipsBadge ipsBadge_positive'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'core_theme_set_css_new', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<span>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $css['deleted'] === true ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<span class='ipsBadge ipsBadge_warning'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'core_theme_set_css_deleted', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<span>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\t\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{$css['diff']}\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/div>\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction diffExportWrapper( $html ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<!DOCTYPE html>\n<html lang=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Member::loggedIn()->language()->bcp47(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" dir=\"\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->language()->isrtl ):\n$return .= <<<CONTENT\nrtl\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nltr\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<title>Diff Export<\/title>\n\t\t<link href=\"http:\/\/netdna.bootstrapcdn.com\/font-awesome\/3.2.1\/css\/font-awesome.css\" rel=\"stylesheet\">\n\t\t<style type=\"text\/css\">\n\t\t\/* ACP *\/\n\t\thtml {\n\t\t\tbackground: #f9f9f9;\n\t\t\t\/*background: #f7f7f7;*\/\n\t\t\t\/*background: #f9f9f9;*\/\n\t\t\tmin-height: 100%;\n\t\t\tposition: relative;\n\t\t}\n\t\t\n\t\tbody {\n\t\t\tfont-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n\t\t\tfont-size: 13px;\n\t\t\tline-height: 18px;\n\t\t\tcolor: #404040;\t\n\t\t\theight: 100%;\n\t\t}\n\t\t\n\t\ta {\n\t\t\tcolor: #166693;\n\t\t\ttext-decoration: none;\n\t\t}\n\t\t\n\t\t\ta:hover {\n\t\t\t\tcolor: #cd3816;\n\t\t\t}\n\t\t\n\t\t.ipsAreaBackground_dark {\n\t\t\tbackground: #394248;\n\t\t}\n\t\t\n\t\t\/* BLOCKS *\/\n\t\t.acpBlock_title {\n\t\t\tpadding: 15px;\n\t\t\tmargin: 0;\n\t\t\tbackground: #f0f0f0;\n\t\t\tcolor: #151515;\n\t\t\tfont-size: 16px;\n\t\t\tfont-weight: normal;\n\t\t}\n\t\t\n\t\t\/* Badges *\/\n\t\t.ipsBadge {\n\t\t\theight: 17px;\n\t\t\tline-height: 17px;\n\t\t\tpadding: 0 8px;\n\t\t\tborder-radius: 10px;\n\t\t\tfont-size: 9px;\n\t\t\ttext-transform: uppercase;\n\t\t\tfont-weight: 500;\n\t\t\tdisplay: inline-block;\n\t\t\tcolor: #fff;\n\t\t\tvertical-align: bottom;\n\t\t\tfont-weight: bold;\n\t\t\ttext-shadow: none;\n\t\t}\n\t\t\n\t\t.ipsBadge.ipsBadge_medium {\n\t\t\theight: 18px;\n\t\t\tline-height: 18px;\n\t\t\tfont-size: 11px;\n\t\t} \n\t\t\n\t\t.ipsBadge.ipsBadge_large {\n\t\t\theight: 23px;\n\t\t\tline-height: 23px;\n\t\t\tpadding: 0 10px;\n\t\t}\n\t\t\n\t\t\/* Styles *\/\n\t\t.ipsBadge_new, .ipsBadge_style1 {\n\t\t\tbackground: #323232;\n\t\t}\n\t\t\n\t\t.ipsBadge_style2 {\n\t\t\tbackground: #d42b39;\n\t\t}\n\t\t\n\t\t.ipsBadge_warning, .ipsBadge_style3 {\n\t\t\tbackground: #834250;\n\t\t}\n\t\t\n\t\t.ipsBadge_positive, .ipsBadge_style4 {\n\t\t\tbackground: #68a72f;\n\t\t}\n\t\t\n\t\t.ipsBadge_negative, .ipsBadge_style5 {\n\t\t\tbackground: #a72f35;\n\t\t}\n\t\t\n\t\t.ipsBadge_neutral, .ipsBadge_style6 {\n\t\t\tbackground: #b3b3b3;\n\t\t}\n\t\t\n\t\t.ipsBadge_intermediary, .ipsBadge_style7 {\n\t\t\tbackground: #cbb641;\n\t\t}\n\n\t\t\/* JS STUFF *\/\n\t\t\/* Used when JS is disabled and element set to show when JS enabled *\/\n\t\t.ipsJS_none .ipsJS_show {\n\t\t\tdisplay: none;\n\t\t}\n\t\t\n\t\t.ipsJS_has .ipsJS_hide {\n\t\t\tdisplay: none;\n\t\t}\n\n\n\t\t\/* Table *\/\n\t\t.ipsTable {\n\t\t\twidth: 100%;\n\t\t\tborder-collapse: collapse;\n\t\t}\n\t\t\n\t\t.ipsTable th {\n\t\t\ttext-align: left;\n\t\t\tbackground: #f3f3f3;\n\t\t\tpadding: 15px 10px;\n\t\t\tfont-size: 13px;\n\t\t}\n\t\t\t\n\t\t\t.ipsTable th a {\n\t\t\t\tcolor: inherit;\n\t\t\t}\n\t\t\t\n\t\t.ipsTable th, .ipsTable td {\n\t\t\tvertical-align: middle;\n\t\t}\n\t\t\n\t\t.ipsTable td {\n\t\t\tpadding: 7px;\n\t\t\tborder-bottom: 1px solid rgba(0,0,0,0.01);\n\t\t}\n\n\t\t\/* Diff *\/\n\t\ttable.diff {\n\t\t\twidth: 100%;\n\t\t}\n\t\t\n\t\ttable.diff td, table.diff th {\n\t\t\twidth: 50%;\n\t\t\tmax-width: 500px;\n\t\t\toverflow-x: auto;\n\t\t}\n\t\t\n\t\ttable.diff td {\n\t\t\tpadding: 10px;\n\t\t\tvertical-align: top;\n\t\t\twhite-space: pre;\n\t\t\twhite-space: pre-wrap;\n\t\t\tfont-family: monospace;\n\t\t}\n\t\t\n\t\t.diffDeleted {\n\t\t\tbackground:rgb(255,224,224);\n\t\t}\n\t\t\n\t\t.diffInserted {\n\t\t\tbackground:rgb(224,255,224);\n\t\t}\n\t\t\n\t\t\/* Messages *\/\n\t\t.ipsMessage {\n\t\t\tpadding: 15px 15px 15px 45px;\n\t\t\tborder-radius: 2px;\n\t\t\tposition: relative;\n\t\t\tmargin-bottom: 10px;\n\t\t\tcolor: #fff;\n\t\t}\n\t\t\n\t\t\t.ipsMessage:before {\n\t\t\t\tfont-family: 'FontAwesome';\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 15px;\n\t\t\t\tleft: 15px;\n\t\t\t\tfont-size: 20px;\n\t\t\t}\n\t\t\n\t\t.ipsMessage_error {\n\t\t\tbackground: #b52b38;\n\t\t}\n\t\t\n\t\t\t.ipsMessage_error:before {\n\t\t\t\tcontent: '\\\\f06a';\n\t\t\t}\n\t\t\n\t\t.ipsMessage_success {\n\t\t\tbackground: #53902f;\n\t\t}\n\t\t\n\t\t\t.ipsMessage_success:before {\n\t\t\t\tcontent: '\\\\f00c';\n\t\t\t}\n\t\t\n\t\t.ipsMessage_warning {\n\t\t\tbackground: #c48712;\n\t\t}\n\t\t\n\t\t\t.ipsMessage_warning:before {\n\t\t\t\tcontent: '\\\\f071';\n\t\t\t}\n\t\t\n\t\t.ipsMessage_info, .ipsMessage_information {\n\t\t\tbackground: #447a9a;\n\t\t}\n\t\t\n\t\t\t.ipsMessage_info:before, .ipsMessage_information:before {\n\t\t\t\tcontent: '\\\\f05a';\n\t\t\t}\n\t\t\n\t\t.ipsMessage_code {\n\t\t\tpadding: 7px;\n\t\t\tdisplay: inline-block;\n\t\t\tbackground: rgba(0,0,0,0.2);\n\t\t\tborder-radius: 3px;\n\t\t\tfloat: right;\n\t\t\tmargin-top: -7px;\n\t\t\tmargin-right: -7px;\n\t\t\tcolor: rgba(255,255,255,0.8);\n\t\t}\n\t\t<\/style>\n\t<\/head>\n\t<body>\n\t{$html}\n\t<\/div>\n\t<\/body>\n<\/html>\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction editor( $config, $dummy ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<noscript>\n\t<p class=\"ipsMessage ipsMessage_error\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_no_js', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n<\/noscript>\n\n<div class=\"ipsJS_show\" data-controller=\"core.admin.customization.editorToolbars\" data-url=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=editor&controller=toolbar\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\">\n\t<div class=\"acpBlock\">\n\t\t<div class='ipsTabs ipsClearfix ipsJS_show acpFormTabBar' id='editor_tabbar' data-ipsTabBar data-ipsTabBar-contentArea='#editor_panels' data-ipsTabBar-updateURL='false'>\n\t\t\t<ul role='tablist'>\n\t\t\t\t<li><a href='#' class='ipsTabs_item ipsTabs_activeItem' id='desktop_tab' role=\"tab\" aria-selected=\"true\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_size_large', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t<li><a href='#' class='ipsTabs_item' id='tablet_tab' role=\"tab\" aria-selected=\"false\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_size_medium', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t<li><a href='#' class='ipsTabs_item' id='phone_tab' role=\"tab\" aria-selected=\"false\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_size_small', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t<div id='editor_panels'>\n\t\t\t\nCONTENT;\n\nforeach ( array( 'desktop', 'tablet', 'phone' ) as $key ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div id='ipsTabs_editor_tabbar_\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_tab_panel' data-role=\"devicePanel\" data-deviceKey=\"\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class='ipsTabs_panel acpFormTabContent'>\n\t\t\t\t\t<ul class='ipsToolList ipsToolList_horizontal ipsClearfix'>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a class='ipsButton ipsButton_normal ipsButton_fullWidth editor_toolbarAddToolbar' href=\"#\" data-action=\"addToolbar\" data-deviceKey=\"\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"><i class='fa fa-plus'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_editor_add_toolbar', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a class='ipsButton ipsButton_normal ipsButton_fullWidth editor_toolbarAddSeperator' href=\"#\" data-action=\"addSep\" data-deviceKey=\"\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"><i class='fa fa-plus'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_editor_add_separator', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t<\/ul>\n\t\t\t\t\t<div class='ipsPad'>\n\t\t\t\t\t\t<h2 class='ipsClear ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t<p class='ipsType_light'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_toolbar_desc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t<div class='editor_dummy editor_dummy_\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n cke_reset' data-role=\"dummyEditor\" data-deviceKey=\"\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" id='editor_dummy_\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t<div class=\"dummy_toolbars cke_top cke_reset_all\" id=\"\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_editor_toolbars\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( empty( $config[ $key ] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<ul class=\"dummy_toolbar clearfix cke_toolbar\" data-role=\"dummyToolbar\"><\/ul>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $config[ $key ] as $row ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $row['name'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<div class='cke_toolbar'>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class=\"dummy_toolbar clearfix cke_toolgroup\" data-role=\"dummyToolbar\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( ( is_array( $row['items'] )) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $row['items'] as $item ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $item === '-' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li><span class=\"cke_toolbar_separator\"><\/span><\/li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li id='\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_editorButton_\nCONTENT;\n$return .= htmlspecialchars( $item, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<div id=\"dummy_\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_contents\" class='dummy_contents cke_bottom'>\n\t\t\t\t\t\t\t\t<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel urna ut leo dignissim auctor ut eget quam. Nullam ac gravida leo. Vestibulum accumsan vulputate lorem nec faucibus. Quisque vitae fringilla orci. Cras est lectus, sollicitudin a bibendum eget, sodales luctus eros. Nam nec erat ac nulla placerat elementum et non sem. Etiam a augue eu arcu tincidunt convallis. Pellentesque volutpat facilisis enim nec aliquet. Integer eu luctus est. Integer nec elit at urna auctor molestie. Vivamus facilisis, elit at molestie tristique, orci augue malesuada magna, at molestie nunc libero ut ante. Fusce feugiat suscipit accumsan.<\/p>\n\t\t\t\t\t\t\t\t<p>Phasellus vel dolor condimentum arcu pellentesque faucibus a rutrum enim. Aliquam nec sem dolor, vel molestie nunc. Donec ac leo urna, vitae adipiscing sapien. Etiam nec elit neque. Suspendisse venenatis eros et ante dictum in adipiscing neque iaculis. Mauris at tellus neque. Phasellus pharetra lectus at quam convallis placerat.<\/p>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<br><br>\n\t\t\t\t\t\t<h2 class='ipsClear ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_unused', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t<p class='ipsType_light'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_unused_desc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\t\t\t<br>\n\n\t\t\t\t\t\t<div class=\"editor_dummy cke_reset\">\n\t\t\t\t\t\t\t<div class=\"dummy_toolbars clearfix cke_top cke_reset_all\">\n\t\t\t\t\t\t\t\t<div class='cke_toolbar'>\n\t\t\t\t\t\t\t\t\t<ul class=\"dummy_toolbar clearfix editor_unusedButtons cke_toolgroup\" id=\"\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_editor_unusedButtons\" data-role=\"dummyToolbar\"><\/ul>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n<\/div>\n\n<div class=\"ipsHide\">\n\t{$dummy->html()}\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction emailFrame( $url ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<iframe src=\"\nCONTENT;\n$return .= htmlspecialchars( $url, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" style='width: 100%; height: 100%; min-height: 500px; border: 0' class='ipsLoading'><\/iframe>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction emailPreview(  ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'email_mentioned', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n<br \/>\n<br \/>\n<table width='100%' cellpadding='0' cellspacing='0' border='0'>\n    <tr>\n        <td width='40' valign='top' class='hidePhone' style='width: 0; max-height: 0; overflow: hidden; float: left;'>\n            <img src='\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->resource( \"default_photo.png\", \"core\", 'global', false );\n$return .= <<<CONTENT\n' width='40' height='40' style='border: 1px solid #777777; vertical-align: middle;'>\n        <\/td>\n        <td width='30' valign='top' class='hidePhone' style='width: 0; max-height: 0; overflow: hidden; float: left;'>\n            <br \/>\n            <span style='display: block; width: 0px; height: 0px; border-width: 15px; border-color: transparent #f9f9f9 transparent transparent; border-style: solid'><\/span>\n        <\/td>\n        <td valign='top' style='background: #f9f9f9;'>\n            <table width='100%' cellpadding='10' cellspacing='0' border='0'>\n                <tr>\n                    <td>\n                        <table width='100%' cellpadding='5' cellspacing='0' border='0'>\n                            <tr>\n                                <td style=\"font-family: 'Helvetica Neue', helvetica, sans-serif; line-height: 1.5; font-size: 14px;\">\n                                    <strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'email_said', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n                                <\/td>\n                            <\/tr>\n                            <tr>\n                                <td style=\"font-family: 'Helvetica Neue', helvetica, sans-serif; line-height: 1.5; font-size: 14px;\">\n                                    ...\n                                <\/td>\n                            <\/tr>\n                            <tr>\n                                <td>\n                                    <a href='#' style=\"color: #ffffff; font-family: 'Helvetica Neue', helvetica, sans-serif; text-decoration: none; font-size: 14px; background: \nCONTENT;\n\n$return .= \\IPS\\Settings::i()->email_color;\n$return .= <<<CONTENT\n; line-height: 32px; padding: 0 10px; display: inline-block; border-radius: 3px;\"><\/a>\n                                <\/td>\n                            <\/tr>\n                        <\/table>\n                    <\/td>\n                <\/tr>\n            <\/table>\n        <\/td>\n    <\/tr>\n<\/table>\n<br \/><br \/>\n<em style='color: #8c8c8c'>\u2014 \nCONTENT;\n\n$return .= \\IPS\\Settings::i()->board_name;\n$return .= <<<CONTENT\n<\/em>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction emoticons( $sets ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<form accept-charset='utf-8' action=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=editor&controller=emoticons&do=edit\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" method=\"post\" data-controller=\"core.admin.customization.emoticons\" id=\"emoticonsManagement\">\n\t<ul class='ipsList_reset' data-role=\"setList\">\n\t\t\nCONTENT;\n\nforeach ( $sets as $setKey => $emoticons ):\n$return .= <<<CONTENT\n\n\t\t\t<li data-emoticonSet=\"\nCONTENT;\n$return .= htmlspecialchars( $setKey, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t<div>\n\t\t\t\t\t<h2 class='acpBlock_title acpBlock_titleDark ipsClear'>\n\t\t\t\t\t\t<div class='ipsPos_right ipsType_blendLinks'>\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=editor&controller=emoticons&do=editTitle&key=$setKey\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" data-ipsDialog data-ipsDialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'emoticons_edit_groupname', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'emoticons_edit_groupname', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-edit'><\/i><\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'core', 'editor', 'emoticons_delete' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=editor&controller=emoticons&do=deleteSet&key=$setKey\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" data-confirm data-confirmsubmessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'emoticons_delete_set_confirm', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'emoticons_delete_set', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-times-circle'><\/i><\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\nCONTENT;\n\n$val = \"{$setKey}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/h2>\n\t\t\t\t\t<ul class='ipsList_reset ipsGrid ipsGrid_collapsePhone ipsPad ipsAreaBackground_light' data-role=\"emoticonsList\" data-emoticonGroup=\"\nCONTENT;\n$return .= htmlspecialchars( $setKey, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsGrid data-ipsGrid-equalHeights='all' data-ipsGrid-minItemSize='175' data-ipsGrid-maxItemSize='300'>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $emoticons as $emo ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li id=\"emo_\nCONTENT;\n$return .= htmlspecialchars( $emo['id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-emoticonID='\nCONTENT;\n$return .= htmlspecialchars( $emo['id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsGrid_span3 ipsAreaBackground_reset'>\n\t\t\t\t\t\t\t\t<div class='ipsBox cEmoticons_box'>\n\t\t\t\t\t\t\t\t\t<div class='ipsPad_half'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'core', 'editor', 'emoticons_delete' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=editor&controller=emoticons&do=delete&id=\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $emo['id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-delete data-delete-warning=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'emoticons_delete_confirm', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-deleterow=\"#emo_\nCONTENT;\n$return .= htmlspecialchars( $emo['id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">&times;<\/a>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $emo['image_2x'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Emoticons\", $emo['image'] )->url;\n$return .= <<<CONTENT\n\" srcset=\"\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Emoticons\", $emo['image_2x'] )->url;\n$return .= <<<CONTENT\n 2x\" alt='' class='ipsImage' \nCONTENT;\n\nif ( $emo['width'] AND $emo['width'] ):\n$return .= <<<CONTENT\n width='\nCONTENT;\n$return .= htmlspecialchars( $emo['width'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' height='\nCONTENT;\n$return .= htmlspecialchars( $emo['height'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Emoticons\", $emo['image'] )->url;\n$return .= <<<CONTENT\n\" alt='' class='ipsImage'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/div>\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class='cEmoticons_input ipsPad_half'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $emo['image_2x'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<span class='cEmoticons_hd ipsType_small ipsType_light' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'emoticon_hd', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip><i class='fa fa-check'><\/i> HD<\/span>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"emo[\nCONTENT;\n$return .= htmlspecialchars( $emo['id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n][set]\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $setKey, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-emoticon-id=\"\nCONTENT;\n$return .= htmlspecialchars( $emo['id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t<input value=\"\nCONTENT;\n$return .= htmlspecialchars( $emo['typed'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" name=\"emo[\nCONTENT;\n$return .= htmlspecialchars( $emo['id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n][name]\">\n\t\t\t\t\t\t\t\t\t\t<noscript>\n\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"number\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $emo['emo_position'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" name=\"emo[\nCONTENT;\n$return .= htmlspecialchars( $emo['id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n][order]\">\n\t\t\t\t\t\t\t\t\t\t<\/noscript>\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'core', 'editor', 'emoticons_edit' ) ):\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsAreaBackground ipsClear ipsClearfix ipsPad ipsType_center\">\t\t\n\t\t\t<button class='ipsButton ipsButton_primary'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'save', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/form>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction formLogo( $url, $type='img' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<img src=\"\nCONTENT;\n$return .= htmlspecialchars( $url, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( $type == 'img' ):\n$return .= <<<CONTENT\nclass=\"ipsThumb_large\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \/>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction langString( $value, $key, $lang, $js ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-controller=\"core.admin.core.langString\" data-saveURL='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=languages&controller=languages&do=translateWord&key={$key}&lang={$lang}&js={$js}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n'>\n\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=languages&controller=languages&do=translateWord&key={$key}&lang={$lang}&js={$js}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" >\nCONTENT;\n$return .= htmlspecialchars( $value, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\nCONTENT;\n\nif ( !$value ):\n$return .= <<<CONTENT\n\n\t\t<noscript>\n\t\t\t<em><a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=languages&controller=languages&do=translateWord&key={$key}&lang={$lang}&js={$js}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_value', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/em>\n\t\t<\/noscript>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction resourceDisplay( $resource ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $resource['resource_filename'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" target=\"_blank\" data-ipsLightbox>\nCONTENT;\n\nif ( in_array( mb_substr( $resource['resource_filename'], mb_strrpos( $resource['resource_filename'], '.' ) + 1 ), \\IPS\\Image::$imageExtensions ) ):\n$return .= <<<CONTENT\n<img src=\"\nCONTENT;\n$return .= htmlspecialchars( $resource['resource_filename'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsImage\" \/>\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $resource['resource_filename'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction resourceName( $resource ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<a href=\"\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Theme\", $resource['resource_filename'] )->url;\n$return .= <<<CONTENT\n\" target=\"_blank\" >\nCONTENT;\n$return .= htmlspecialchars( $resource['resource_name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction templateConflict( $skinSet, $conflicts, $templates, $css, $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $formClass='', $attributes=array(), $sidebar='' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<form accept-charset='utf-8' data-controller='core.admin.templates.conflict' data-normalURL=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=skins&id={$skinSet->_id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" data-ajaxURL=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=ajax&id={$skinSet->_id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" action=\"\nCONTENT;\n$return .= htmlspecialchars( $action, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" method=\"post\" \nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\nenctype=\"multipart\/form-data\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n data-ipsForm class=\"\nCONTENT;\n$return .= htmlspecialchars( $formClass, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nforeach ( $attributes as $k => $v ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n>\n\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_submitted\" value=\"1\">\n\t\nCONTENT;\n\nforeach ( $hiddenValues as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\n\t<p class=\"ipsMessage ipsMessage_error\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_conflict_message', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\n\t<div class=\"acpBlock\">\n\t\t\nCONTENT;\n\nforeach ( $conflicts['template'] as $key => $data ):\n$return .= <<<CONTENT\n\n\t\t<div class=\"acpBlock_title\">\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_app'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_location'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_path'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/div>\n\t\t<table class=\"ipsTable diff restrict_height\">\n\t\t\t<tr>\n\t\t\t\t<th><span data-conflict-id=\"\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-conflict-name=\"old\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_conflict_old_version', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/th>\n\t\t\t\t<th><span data-conflict-id=\"\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-conflict-name=\"new\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_conflict_new_version', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <\/span><\/th>\n\t\t\t<\/tr>\n\t\t<\/table>\n\t\t<div data-conflict-id=\"\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t{$data['diff']}\n\t\t<\/div>\n\t\t<div class=\"ipsAreaBackground_light ipsPad\">\n\t\t\t<div class='ipsGrid'>\n\t\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t\t<span class='ipsButton ipsButton_primary' data-conflict-name=\"old\">\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $elements as $collection ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $collection as $name => $input ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $name == 'conflict_' . $data['conflict_id'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<input id='elField_\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' type=\"radio\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"old\" checked=\"checked\" \/>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_conflict_use_this', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t\t<span class='ipsButton ipsButton_primary' data-conflict-name=\"new\">\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $elements as $collection ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $collection as $name => $input ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $name == 'conflict_' . $data['conflict_id'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<input id='elField_\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'  type=\"radio\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"new\" \/>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_conflict_use_this', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nforeach ( $conflicts['css'] as $key => $data ):\n$return .= <<<CONTENT\n\n\t\t<div class=\"acpBlock_title\">\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_app'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_location'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_path'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\/\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/div>\n\t\t<table class=\"ipsTable diff restrict_height\">\n\t\t\t<tr>\n\t\t\t\t<th><span data-conflict-id=\"\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-conflict-name=\"old\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_conflict_old_version', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/th>\n\t\t\t\t<th><span data-conflict-id=\"\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-conflict-name=\"new\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_conflict_new_version', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <\/span><\/th>\n\t\t\t<\/tr>\n\t\t<\/table>\n\t\t<div data-conflict-id=\"\nCONTENT;\n$return .= htmlspecialchars( $data['conflict_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t{$data['diff']}\n\t\t<\/div>\n\t\t<div class=\"ipsAreaBackground_light ipsPad\">\n\t\t\t<div class='ipsGrid'>\n\t\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t\t<span class='ipsButton ipsButton_primary' data-conflict-name=\"old\">\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $elements as $collection ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $collection as $name => $input ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $name == 'conflict_' . $data['conflict_id'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<input id='elField_\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' type=\"radio\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"old\" checked=\"checked\" \/>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_conflict_use_this', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t\t<span class='ipsButton ipsButton_primary' data-conflict-name=\"new\">\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $elements as $collection ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $collection as $name => $input ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $name == 'conflict_' . $data['conflict_id'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<input id='elField_\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'  type=\"radio\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"new\" \/>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_conflict_use_this', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/div>\n\t<div class=\"ipsAreaBackground_light ipsClearfix ipsPad ipsType_center\">\n\t\t\nCONTENT;\n\n$return .= implode( '', $actionButtons);\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/form>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction templateEditor( $theme, $templateNames, $template, $current ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<form accept-charset='utf-8' action=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=saveTemplate&id={$theme->_id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" method=\"POST\" id=\"editorForm\">\n\t<input type=\"hidden\" name=\"t_type\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $current['type'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t<input type=\"hidden\" name=\"t_key\" value=\"\nCONTENT;\n\nif ( $current['type'] == 'templates' ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $template['TemplateKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $template['CssKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t<input type=\"hidden\" name=\"t_app\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $current['app'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t<input type=\"hidden\" name=\"t_location\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $current['location'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t<input type=\"hidden\" name=\"t_group\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $current['group'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t<input type=\"hidden\" name=\"t_name\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $current['template'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t<input type=\"hidden\" name=\"t_item_id\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $current['item_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\n\t<h2 class='acpBlock_title acpBlock_titleDark acpBlock_titleSmall'>\nCONTENT;\n\n$sprintf = array($theme->_title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_editing_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/h2>\n\t<div class='ipsAreaBackground ipsPad' id='elTemplateEditor' data-controller='core.admin.templates.main' data-normalURL=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&id={$theme->_id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" data-ajaxURL=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=ajax&id={$theme->_id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\">\n\t\t<div class='ipsColumns'>\n\t\t\t<div class='ipsColumn ipsColumn_wide' data-role=\"fileList\" data-controller='core.admin.templates.fileList'>\n\t\t\t\t<div class=\"ipsClearfix\" class=\"ipsJS_show\">\n\t\t\t\t\t<input data-role=\"templateSearch\" placeholder=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'search_templates', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" class=\"ipsPos_left\">\n\t\t\t\t\t<a href='#elTemplateFilterMenu_menu' id='elTemplateFilterMenu' class='ipsButton ipsButton_light ipsButton_small ipsPos_right' data-ipsMenu data-ipsMenu-selectable><i class=\"fa fa-filter\"><\/i> &nbsp;<i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t<\/div>\n\t\t\t\t<ul id='elTemplateFilterMenu_menu' role='menu' class='ipsMenu ipsMenu_selectable ipsMenu_auto ipsMenu_withStem ipsHide'>\n\t\t\t\t\t<li class='ipsMenu_item ipsMenu_itemChecked' data-ipsMenuValue='outofdate'><a href='#'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_outofdate', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t<li class='ipsMenu_item ipsMenu_itemChecked' data-ipsMenuValue='modified'><a href='#'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_modified', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t<li class='ipsMenu_item ipsMenu_itemChecked' data-ipsMenuValue='inherited'><a href='#'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_inherited', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t<li class='ipsMenu_item ipsMenu_itemChecked' data-ipsMenuValue='unique'><a href='#'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_unique', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t<li class='ipsMenu_item ipsMenu_itemChecked' data-ipsMenuValue='unmodified'><a href='#'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_unmodified', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t<\/ul>\n\t\t\t\t<ul id='elTemplateEditor_newItemMenu_menu' role='menu' class='ipsMenu ipsMenu_auto ipsMenu_withStem ipsHide'>\n\t\t\t\t\t<li class='ipsMenu_item'><a role='menuitem' href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=cssForm&id={$theme->_id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-forceReload data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_add_css', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_new_css', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t<li class='ipsMenu_item'><a  role='menuitem' href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=templateForm&id={$theme->_id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-forceReload data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_add_html', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_new_html', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t<\/ul>\n\t\t\t\t<div class='ipsAreaBackground_reset'>\n\t\t\t\t\t<div class='ipsTabs ipsTabs_stretch ipsClearfix acpFormTabBar' id='elTemplateEditor_typeTabs' data-ipsTabBar data-ipsTabBar-contentArea='#elTemplateEditor_fileList' data-ipsTabBar-updateURL='false'>\n\t\t\t\t\t\t<ul role=\"tablist\">\n\t\t\t\t\t\t\t<li><a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=templates&id={$theme->_id}&t_type={$current['type']}&t_type=templates\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsTabs_item ipsType_center \nCONTENT;\n\nif ( $current['type'] == 'templates' ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-tabURL='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=ajax&id={$theme->_id}&do=loadMenu&t_type=templates\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-type='templates'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_templates', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t<li><a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=templates&id={$theme->_id}&t_type={$current['type']}&t_type=css\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsTabs_item ipsType_center \nCONTENT;\n\nif ( $current['type'] == 'css' ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-tabURL='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=ajax&id={$theme->_id}&do=loadMenu&t_type=css\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-type='css'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_css', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<section id='elTemplateEditor_fileList'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"customization\", \"core\", 'admin' )->templateEditorMenu( $theme, $templateNames, $current );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/section>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"ipsSpacer_top\">\n\t\t\t\t\t<a href='#elTemplateEditor_newItemMenu_menu' id='elTemplateEditor_newItemMenu' class='ipsButton ipsButton_normal ipsButton_small ipsButton_fullWidth' data-ipsMenu data-ipsMenu-above>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_new', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n &nbsp;<i class='fa fa-caret-down'><\/i><\/a><\/li>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<div class='ipsColumn ipsColumn_fluid'  data-controller='core.admin.templates.fileEditor'>\n\t\t\t\t<ul class='ipsList_inline ipsClearfix' id='elTemplateEditor_panelToolbar'>\n\t\t\t\t\t<li class='ipsPos_right'>\n\t\t\t\t\t\t<a href='#elTemplateEditor_preferences_menu' id='elTemplateEditor_preferences' class='ipsButton ipsButton_light ipsButton_small' data-ipsMenu data-ipsMenu-selectable><i class='fa fa-cog'><\/i> <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t\t\t<ul id='elTemplateEditor_preferences_menu' class='ipsMenu ipsMenu_selectable ipsMenu_auto ipsMenu_withStem ipsHide'>\n\t\t\t\t\t\t\t<li class='ipsMenu_item' data-ipsMenuValue='wrap'><a href='#'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_wrap', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t<li class='ipsMenu_item' data-ipsMenuValue='lines'><a href='#'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_show_line', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t<li class='ipsMenu_item' data-ipsMenuValue='diff'><a href='#'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_show_original', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class='ipsPos_right \nCONTENT;\n\nif ( $current['type'] == 'css' ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<a href='#' id='elTemplateEditor_variables' class='ipsButton ipsButton_veryLight ipsButton_small' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_edit_variables', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-content=\"#elTemplateEditor_variablesDialog\" data-ipsDialog-size='narrow'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_variables', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class='ipsPos_right \nCONTENT;\n\nif ( $current['type'] == 'templates' ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<a href='#' id='elTemplateEditor_attributes' class='ipsButton ipsButton_veryLight ipsButton_small' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_edit_css', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-content=\"#elTemplateEditor_attributesDialog\" data-ipsDialog-size='narrow'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_attributes', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class='ipsPos_right'>\n\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=deleteTemplate&t_type={$current['type']}&id={$theme->_id}&t_item_id={$current['item_id']}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_veryLight ipsButton_small \nCONTENT;\n\nif ( $template['InheritedValue'] == 'original' ):\n$return .= <<<CONTENT\nipsButton_disabled\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-action=\"revert\">\nCONTENT;\n\nif ( $template['InheritedValue'] == 'custom' ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'delete', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'revert', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<button type='submit' class='ipsButton ipsButton_primary ipsButton_small' data-action=\"save\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'save', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t\t\t\t<\/li>\t\t\t\t\t\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span data-role='loading' class='ipsHide'><i class='icon-spinner2 ipsLoading_tinyIcon'><\/i> &nbsp;\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'loading', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/li>\n\t\t\t\t<\/ul>\n\t\t\t\t<br>\n\t\t\t\t<div id='elTemplateEditor_outerPanelWrap'>\n\t\t\t\t\t<div id='elTemplateEditor_panelWrap'>\n\t\t\t\t\t\t<ul id='elTemplateEditor_tabbar' class='ipsTabs ipsClearfix acpFormTabBar' data-ipsTabBar data-ipsTabBar-contentArea='#elTemplateEditor_panels'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $current['type'] == 'templates' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li data-fileid='\nCONTENT;\n$return .= htmlspecialchars( $template['TemplateKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t<a href='#' class='ipsTabs_item' id='tab_\nCONTENT;\n$return .= htmlspecialchars( $template['TemplateKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $current['template'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n <span data-action='closeTab'><i class='fa fa-times'><\/i><\/span><\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li data-fileid='\nCONTENT;\n$return .= htmlspecialchars( $template['jsDataKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t<a href='#' class='ipsTabs_item' id='tab_\nCONTENT;\n$return .= htmlspecialchars( $template['jsDataKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $template['css_name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n <span data-action='closeTab'><i class='fa fa-times'><\/i><\/span><\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t<section data-role=\"templatePanelWrap\" id='elTemplateEditor_panels'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $current['type'] == 'templates' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"customization\", \"core\", 'admin' )->templateEditorHtmlPane( $theme, $templateNames, $template, $current );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"customization\", \"core\", 'admin' )->templateEditorCssPane( $theme, $templateNames, $template, $current );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/section>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<br>\n\t\t<ul class='ipsList_inline ipsType_light ipsType_small'>\n\t\t\t<li class='cTemplateState_outofdate'> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_outofdate', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t<li class='cTemplateState_changed'> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_modified', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t<li class='cTemplateState_inherit'> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_inherited', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t<li class='cTemplateState_custom'> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_unique', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t<\/ul>\n\t\t<div id='elTemplateEditor_variablesDialog' class='ipsHide'>\n\t\t\t<div data-controller='core.admin.templates.variablesDialog'>\n\t\t\t\t<div class='ipsPad'>\n\t\t\t\t\t<p class='ipsType_textBlock'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_variables_info', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<textarea class='ipsField_fullWidth' data-role='variables' placeholder='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_template_variables', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><\/textarea>\n\t\t\t\t\t<input type='hidden' name='_variables_fileid' value=''>\n\t\t\t\t\t<input type='hidden' name='_variables_type' value=''>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsPad ipsAreaBackground ipsType_right'>\n\t\t\t\t\t<input type='submit' class='ipsButton ipsButton_primary' value='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'save', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\n\t\t<div id='elTemplateEditor_attributesDialog' class='ipsHide'>\n\t\t\t<div data-controller='core.admin.templates.variablesDialog'>\n\t\t\t\t<div class='ipsPad'>\n\t\t\t\t\t<p class='ipsType_textBlock'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_css_attributes', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<input class='ipsField_fullWidth' data-role='variables' placeholder=\"e.g. media='screen'\">\n\t\t\t\t\t<input type='hidden' name='_variables_fileid' value=''>\n\t\t\t\t\t<input type='hidden' name='_variables_type' value=''>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsPad ipsAreaBackground ipsType_right'>\n\t\t\t\t\t<input type='submit' class='ipsButton ipsButton_primary' value='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'save', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/form>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction templateEditorAddForm( $formHTML, $type ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-controller='core.admin.templates.addForm' data-type='$type'>\n\t{$formHTML}\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction templateEditorCssPane( $theme, $templateNames, $template, $current ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-role=\"templatePanel\">\n\t<div data-role=\"templatePanel\" data-fileid=\"\nCONTENT;\n$return .= htmlspecialchars( $template['jsDataKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-app=\"\nCONTENT;\n$return .= htmlspecialchars( $current['app'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-location=\"\nCONTENT;\n$return .= htmlspecialchars( $current['location'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-group=\"\nCONTENT;\n$return .= htmlspecialchars( $current['group'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-name=\"\nCONTENT;\n$return .= htmlspecialchars( $current['template'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-type='css' data-itemID='\nCONTENT;\n$return .= htmlspecialchars( $current['item_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-inherited-value=\"\nCONTENT;\n$return .= htmlspecialchars( $template['InheritedValue'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t<textarea  name=\"editor_\nCONTENT;\n$return .= htmlspecialchars( $template['jsDataKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" id=\"editor_\nCONTENT;\n$return .= htmlspecialchars( $template['jsDataKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-role=\"editor\">\nCONTENT;\n$return .= htmlspecialchars( $template['css_content'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/textarea>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction templateEditorHtmlPane( $theme, $templateNames, $template, $current ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsTabs_panel' data-role=\"templatePanel\" id='ipsTabs_elTemplateEditor_tabbar_tab_\nCONTENT;\n$return .= htmlspecialchars( $template['TemplateKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_panel' data-fileid=\"\nCONTENT;\n$return .= htmlspecialchars( $template['TemplateKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-app=\"\nCONTENT;\n$return .= htmlspecialchars( $current['app'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-location=\"\nCONTENT;\n$return .= htmlspecialchars( $current['location'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-group=\"\nCONTENT;\n$return .= htmlspecialchars( $current['group'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-name=\"\nCONTENT;\n$return .= htmlspecialchars( $current['template'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-type='templates' data-itemID='\nCONTENT;\n$return .= htmlspecialchars( $current['item_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-inherited-value=\"\nCONTENT;\n$return .= htmlspecialchars( $template['InheritedValue'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t<input data-role=\"variables\" type=\"text\" name=\"variables_\nCONTENT;\n$return .= htmlspecialchars( $template['TemplateKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsField_fullWidth\" value='\nCONTENT;\n$return .= htmlspecialchars( $template['template_data'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' placeholder=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'skin_set_template_templatevars', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\n\t<textarea name=\"editor_\nCONTENT;\n$return .= htmlspecialchars( $template['TemplateKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" id=\"editor_\nCONTENT;\n$return .= htmlspecialchars( $template['TemplateKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-role=\"editor\">\nCONTENT;\n$return .= htmlspecialchars( $template['template_content'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/textarea>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction templateEditorMenu( $theme, $templateNames, $current ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<ul class='cTemplateList ipsList_reset' data-type='\nCONTENT;\n$return .= htmlspecialchars( $current['type'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\nCONTENT;\n\nforeach ( $templateNames as $app => $data ):\n$return .= <<<CONTENT\n\n\t<li \nCONTENT;\n\nif ( $app == $current['app'] ):\n$return .= <<<CONTENT\nclass=\"cTemplateList_activeBranch\"\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nclass=\"cTemplateList_inactiveBranch\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n data-app=\"\nCONTENT;\n$return .= htmlspecialchars( $app, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=templates&id={$theme->_id}&t_type={$current['type']}&t_app={$app}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-action=\"toggleBranch\">\nCONTENT;\n$return .= htmlspecialchars( $app, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t<ul class='ipsList_reset'>\n\t\t\nCONTENT;\n\nforeach ( $templateNames[$app] as $location => $data ):\n$return .= <<<CONTENT\n\n\t\t\t<li \nCONTENT;\n\nif ( $location == $current['location'] ):\n$return .= <<<CONTENT\nclass=\"cTemplateList_activeBranch\"\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nclass=\"cTemplateList_inactiveBranch\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n data-location=\"\nCONTENT;\n$return .= htmlspecialchars( $location, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=templates&id={$theme->_id}&t_type={$current['type']}&t_app={$app}&t_location={$location}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-action=\"toggleBranch\">\nCONTENT;\n$return .= htmlspecialchars( $location, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t<ul class='ipsList_reset'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $templateNames[$app][$location] as $group => $data ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $current['type'] == 'css' AND $group == '.' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $data as $id => $css ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li \nCONTENT;\n\nif ( $css['css_name'] == $current['template'] && !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\nclass=\"cTemplateList_activeNode\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\t\t\t\t\t<a data-type=\"\nCONTENT;\n$return .= htmlspecialchars( $current['type'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=templates&id={$theme->_id}&t_type={$current['type']}&t_app={$app}&t_location={$location}&t_group={$group}&t_name=\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= htmlspecialchars( urlencode($css['css_name']), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-action=\"openFile\" data-name=\"\nCONTENT;\n$return .= htmlspecialchars( $css['css_name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-inherited-value=\"\nCONTENT;\n$return .= htmlspecialchars( $css['InheritedValue'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-key=\"\nCONTENT;\n$return .= htmlspecialchars( $css['jsDataKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-itemID='\nCONTENT;\n$return .= htmlspecialchars( $css['css_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $css['css_name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li \nCONTENT;\n\nif ( $location == $current['location'] AND $group == $current['group'] ):\n$return .= <<<CONTENT\nclass=\"cTemplateList_activeBranch\"\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nclass=\"cTemplateList_inactiveBranch\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n data-group=\"\nCONTENT;\n$return .= htmlspecialchars( $group, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=templates&id={$theme->_id}&t_type={$current['type']}&t_app={$app}&t_location={$location}&t_group={$group}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-action=\"toggleBranch\">\nCONTENT;\n$return .= htmlspecialchars( $group, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<ul class='ipsList_reset'>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $templateNames[$app][$location][$group] as $name => $data ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li \nCONTENT;\n\nif ( $name == $current['template'] && !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\nclass=\"cTemplateList_activeNode\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\t\t\t\t\t<a data-type=\"\nCONTENT;\n$return .= htmlspecialchars( $current['type'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=templates&id={$theme->_id}&t_type={$current['type']}&t_app={$app}&t_location={$location}&t_group={$group}&t_name=\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= htmlspecialchars( urlencode($name), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-action=\"openFile\" data-name=\"\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-inherited-value=\"\nCONTENT;\n$return .= htmlspecialchars( $data['InheritedValue'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-key=\"\nCONTENT;\n$return .= htmlspecialchars( $data['jsDataKey'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-itemID='\nCONTENT;\n\nif ( $current['type'] == 'css' ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $data['css_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $data['template_id'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/ul>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction themeDescription( $author, $url='' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $url ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$author = \"<a href='{$url}' target='_blank'>{$author}<\/a>\";\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n$htmlsprintf = array($author); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'theme_by', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction themeSettingLabelWithKey( $setting ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<span class='ipsThemeKey' data-ipsTooltip title=\"\nCONTENT;\n$return .= htmlspecialchars( $setting['sc_key'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$val = \"{$setting['sc_title']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction themeSettingRevert( $themeId, $setting ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n&nbsp; <a data-controller=\"core.admin.customization.themes\" href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=revertThemeSetting&id=$themeId&key={$setting['sc_key']}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class=\"ipsButton ipsButton_normal ipsButton_verySmall\" data-ipsThemeSetting=\"\nCONTENT;\n$return .= htmlspecialchars( $setting['sc_key'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'revert', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction vseBadge( $themeId ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=customization&controller=themes&do=launchvse&id=$themeId\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class=\"ipsType_blendLinks\" target='_blank' data-ipstooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'core_theme_launch_vse_tooltip', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'core_theme_launch_vse', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
