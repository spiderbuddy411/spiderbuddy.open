<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_core_admin_dashboard extends \\IPS\\Theme\\Template\n{\n\t\t\tfunction adminnotes( $lastUpdated, $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $formClass='', $attributes=array(), $sidebar=array(), $form=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-controller='core.admin.dashboard.adminNotes'>\n\t<form id='admin_notes' accept-charset='utf-8' action=\"\nCONTENT;\n$return .= htmlspecialchars( $action, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" method=\"post\" data-ipsForm class=\"\nCONTENT;\n$return .= htmlspecialchars( $formClass, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nforeach ( $attributes as $k => $v ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n>\n\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_submitted\" value=\"1\">\n\t\t\nCONTENT;\n\nforeach ( $hiddenValues as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\n\n\t\t\nCONTENT;\n\nforeach ( $elements as $collection ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nforeach ( $collection as $input ):\n$return .= <<<CONTENT\n\n\t\t\t\t{$input->html()}\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\n\t\t<div class='ipsClearfix ipsType_light ipsType_medium'>\n\t\t\t<div class='ipsPad_half ipsPos_right'>\n\t\t\t\t<input type='submit' class='ipsButton ipsButton_alternate' value=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'save', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\n\t\t\t<\/div>\n\t\t\t<div class='ipsPad_half ipsPos_left'>\n\t\t\t\t<span data-role='notesLoading' class='ipsHide'>\n\t\t\t\t\t<i class='icon-spinner2 ipsLoading_tinyIcon'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'saving', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n&nbsp;&nbsp;\n\t\t\t\t<\/span>\n\n\t\t\t\t\t<h3 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'admin_notes_last_update', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t<span data-role='notesInfo' class='ipsType_medium'>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $lastUpdated ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $lastUpdated, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'never', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/span>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/form>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction awaitingValidation( $users ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( !empty( $users ) ):\n$return .= <<<CONTENT\n\n\t<ul class='ipsDataList ipsSpacer_bottom' itemscope itemtype=\"http:\/\/schema.org\/ItemList\" data-controller='core.admin.dashboard.validation'>\n\t\t\nCONTENT;\n\nforeach ( $users as $user  ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsDataItem' data-role='userAwaitingValidation' itemprop=\"itemListElement\">\n\t\t\t\t<div class='ipsDataItem_main ipsPhotoPanel ipsPhotoPanel_mini ipsClearfix'>\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $user, 'mini' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ul class='ipsButton_split ipsPos_right ipsSpacer_top ipsSpacer_half' data-role='validateToggles'>\n\t\t\t\t\t\t\t<li><a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=members&do=approve&id={$user->member_id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-action='approve' class='ipsButton ipsButton_verySmall ipsButton_positive'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'approve', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t<li><a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=members&do=ban&permban=1&id={$user->member_id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-action='ban' class='ipsButton ipsButton_verySmall ipsButton_negative'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ban', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t<\/ul>\n\n\t\t\t\t\t\t<h4 class='ipsType_reset ipsType_large'><strong><a href='\nCONTENT;\n$return .= htmlspecialchars( $user->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_view_profile', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-role=\"userName\">\nCONTENT;\n$return .= htmlspecialchars( $user->name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a><\/strong> &nbsp;&nbsp;<span class='ipsType_light ipsType_unbold ipsType_normal'>(\nCONTENT;\n$return .= htmlspecialchars( $user->email, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n)<\/span><\/h4>\n\t\t\t\t\t\t<ul class='ipsList_inline ipsType_medium'>\n\t\t\t\t\t\t\t<li><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ip_address', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n:<\/strong> \nCONTENT;\n$return .= htmlspecialchars( $user->ip_address, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\t\t\t<li><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'block_awaiting_registered', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n:<\/strong> \nCONTENT;\n\n$val = ( $user->joined instanceof \\IPS\\DateTime ) ? $user->joined : \\IPS\\DateTime::ts( $user->joined );$return .= $val->html();\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=members&filter=members_filter_validating\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_verySmall ipsButton_light'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'block_awaiting_validation_all', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<div class='ipsType_medium ipsType_light ipsType_center'>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'none_awaiting_validation', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction backgroundQueue( $rows ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( count( $rows ) ):\n$return .= <<<CONTENT\n\n\t<div class='ipsGrid ipsGrid_collapsePhone'>\n\t\t\nCONTENT;\n\nforeach ( $rows as $row ):\n$return .= <<<CONTENT\n\n\t\t\t<div class=\"ipsGrid_span6 ipsPad ipsType_center\">\n\t\t\t\t<p class='ipsType_medium ipsType_reset ipsSpacer_bottom ipsSpacer_half ipsTruncate ipsTruncate_line'><strong>{$row['text']}<\/strong><\/p>\n\t\t\t\t\nCONTENT;\n\nif ( $row['complete'] === NULL ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class=\"ipsProgressBar ipsProgressBar_small ipsProgressBar_fullWidth ipsProgressBar_animated\"><div class=\"ipsProgressBar_progress\" style=\"width:100%\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'progress_bar_percent_not_available', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/div><\/div>\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class=\"ipsProgressBar ipsProgressBar_small ipsProgressBar_fullWidth\"><div class=\"ipsProgressBar_progress\" style=\"width: \nCONTENT;\n\n$return .= htmlspecialchars( number_format( $row['complete'], 2), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n%\">\nCONTENT;\n$return .= htmlspecialchars( $row['complete'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n%<\/div><\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/div>\n\t<p class=\"ipsType_medium ipsType_light ipsType_center\">\n\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->task_use_cron ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'background_processes_desc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'background_processes_desc_nocron', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<br>\n\t\t\nCONTENT;\n\n$sprintf = array(\\IPS\\Member::loggedIn()->language()->addToStack('background_process_run_title')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'background_processes_run_now', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t<\/p>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<div class=\"ipsType_medium ipsType_light ipsType_center\">\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_background_processes', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction connectFailures( $failures, $failureCount=0 ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$pluralize = array( $failureCount ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'connect_failures_desc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n<br><br>\n\nCONTENT;\n\nif ( !empty( $failures ) ):\n$return .= <<<CONTENT\n\n\t<ul class='ipsDataList ipsDataList_reducedSpacing' itemscope itemtype=\"http:\/\/schema.org\/ItemList\">\n\t\nCONTENT;\n\nforeach ( $failures as $failure  ):\n$return .= <<<CONTENT\n\n\t\t<li class='ipsDataItem' itemprop=\"itemListElement\">\n\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t<div class='ipsPos_right ipsTree_controls'>\n\t\t\t\t\t<ul data-ipscontrolstrip class=\"ipsControlStrip ipsType_noBreak ipsList_reset\">\n\t\t\t\t\t\t<li class=\"ipsControlStrip_button\">\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=settings&controller=login&do=retryConnect&slave={$failure['slave']['slave_id']}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'slave_try_again', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip>\n\t\t\t\t\t\t\t\t<i class='ipsControlStrip_icon fa fa-play-circle'><\/i>\n\t\t\t\t\t\t\t\t<span class='ipsControlStrip_item'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'slave_try_again', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t<li class=\"ipsControlStrip_button\">\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=overview&controller=dashboard&deleteSlave={$failure['slave']['slave_id']}\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'remove_slave', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-confirm data-ipsTooltip data-confirmMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'delete_slave_confirm', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t<i class='ipsControlStrip_icon fa fa-times-circle'><\/i>\n\t\t\t\t\t\t\t\t<span class='ipsControlStrip_item'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'remove_slave', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/div>\n\t\t\t\t<h4 class='ipsDataItem_title'>\nCONTENT;\n$return .= htmlspecialchars( $failure['slave']['slave_url'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t<p class='ipsDataItem_meta'>\n\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $failure['count'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'failed_logins_suffix', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction dashboard( $newVersion, $cols, $blocks, $info, $bulletins, $warnings ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div data-controller='core.admin.dashboard.main'>\n\n\t\nCONTENT;\n\nif ( $newVersion ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsAreaBackground_light ipsPad ipsPhotoPanel ipsPhotoPanel_small ipsPhotoPanel_notPhone' id='acpNewVersion'>\n\t\t\t<i class='fa fa-info-circle ipsPos_left ipsResponsive_hidePhone'><\/i>\n\t\t\t<div>\n\t\t\t\t<h2 class='ipsType_sectionHead'><strong>\nCONTENT;\n\n$sprintf = array($newVersion['version']); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'dashboard_version_info', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/strong><\/h2>\n\t\t\t\t\nCONTENT;\n\nif ( $newVersion['security'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<p><strong class=\"ipsType_warning\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'this_is_a_security_update', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/p>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( isset( $newVersion['releasenotes'] ) and $newVersion['releasenotes'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div>{$newVersion['releasenotes']}<\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'core', 'system', 'upgrade_manage' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=upgrade&_new=1\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_primary ipsButton_small'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'upgrade_now', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $newVersion['updateurl'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $newVersion['updateurl'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' target=\"_blank\" class='ipsButton ipsButton_alternate ipsButton_small'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'dashboard_version_moreinfo', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<br>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\n\t\nCONTENT;\n\nif ( count($bulletins) ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nforeach ( $bulletins as $bulletin ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsAreaBackground_light ipsPad ipsPhotoPanel ipsPhotoPanel_small ipsPhotoPanel_notPhone' id='acpNewVersion'>\n\t\t\t\t<i class='fa fa-info-circle ipsPos_left ipsResponsive_hidePhone'><\/i>\n\t\t\t\t<div>\n\t\t\t\t\t<h2 class='ipsType_sectionHead'><strong>\nCONTENT;\n$return .= htmlspecialchars( $bulletin['title'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong><\/h2>\n\t\t\t\t\t<div class='ipsType_normal ipsType_reset'>{$bulletin['description']}<\/div>\n\t\t\t\t\t<br>\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $bulletin['link'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_primary ipsButton_small'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'dashboard_version_moreinfo', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n &nbsp;<i class='fa fa-chevron-right'><\/i><\/a>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<br>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\nCONTENT;\n\nif ( count($warnings) ):\n$return .= <<<CONTENT\n\n\t<div id='acpWarnings'>\n\t\t\nCONTENT;\n\nforeach ( $warnings as $warning ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsAreaBackground_light ipsPad ipsPhotoPanel ipsPhotoPanel_small ipsPhotoPanel_notPhone'>\n\t\t\t<i class='fa fa-warning ipsPos_left ipsResponsive_hidePhone'><\/i>\n\t\t\t<div>\n\t\t\t\t<h2 class='ipsType_sectionHead'><strong>\nCONTENT;\n$return .= htmlspecialchars( $warning['title'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong><\/h2>\n\t\t\t\t<div class='ipsType_normal ipsType_reset'>{$warning['description']}<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<br>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\n\t\nCONTENT;\n\n$unusedBlocks = 0;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nforeach ( $info as $block ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( !isset($blocks[ $block['key'] ])  ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$unusedBlocks++;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->buttons( array( 'add' => array( 'icon' => 'plus', 'title' => 'add_button', 'link' => \\IPS\\Http\\Url::internal( '#elAddWidgets_button_menu' ), 'id' => 'elAddWidgets', 'dropdown' => true, 'class' => ( $unusedBlocks > 0 ? '' : 'ipsButton_disabled' ), 'data' => array( 'ipsMenu' => true )  ) ) );\n$return .= <<<CONTENT\n\n\t<ul id='elAddWidgets_button_menu' class='ipsMenu ipsMenu_auto ipsHide'>\n\t\t\nCONTENT;\n\nforeach ( $info as $block ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsMenu_item \nCONTENT;\n\nif ( isset($blocks[ $block['key'] ])  ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-ipsMenuValue='\nCONTENT;\n$return .= htmlspecialchars( $block['key'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-widgetName='\nCONTENT;\n$return .= htmlspecialchars( $block['name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t<a href='#'>\nCONTENT;\n$return .= htmlspecialchars( $block['name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n\n\t<div class='ipsGrid ipsGrid_collapseTablet'>\n\t\t<div class='ipsGrid_span8' data-role=\"mainerColumn\">\n\t\t\t<ol class='ipsList_reset' data-role=\"mainColumn\">\n\t\t\t\t\nCONTENT;\n\nforeach ( $cols['main'] as $cellKey ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( array_key_exists( $cellKey, $blocks ) and isset($info[ $cellKey ]) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"dashboard\", \"core\" )->widgetWrapper( $blocks[ $cellKey ], $info[ $cellKey ] );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ol>\n\t\t<\/div>\n\t\t<div class='ipsGrid_span4 acpWidget_sidebar'>\n\t\t\t<ol class='ipsList_reset' data-role=\"sideColumn\">\n\t\t\t\t\nCONTENT;\n\nforeach ( $cols['side'] as $cellKey ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( array_key_exists( $cellKey, $blocks ) and isset($info[ $cellKey ]) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"dashboard\", \"core\" )->widgetWrapper( $blocks[ $cellKey ], $info[ $cellKey ] );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ol>\n\t\t<\/div>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction failedLogins( $logins ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( count( $logins ) ):\n$return .= <<<CONTENT\n\n\t<ul class='ipsDataList ipsDataList_reducedSpacing' itemscope itemtype=\"http:\/\/schema.org\/ItemList\">\n\t\nCONTENT;\n\nforeach ( $logins as $login  ):\n$return .= <<<CONTENT\n\n\t\t<li class='ipsDataItem' itemprop=\"itemListElement\">\n\t\t\t<div class='ipsDataItem_main'>\n\t\t<h4 class='ipsDataItem_title'>\nCONTENT;\n$return .= htmlspecialchars( $login['admin_username'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/h4>\n\t\t<p class='ipsDataItem_meta'>\n\t\t\t\nCONTENT;\n\n$val = ( $login['admin_time'] instanceof \\IPS\\DateTime ) ? $login['admin_time'] : \\IPS\\DateTime::ts( $login['admin_time'] );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t<\/p>\n\t<\/div>\n\t\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=staff&controller=admin&do=loginLogs&filter=adminloginlogs_unsuccessful\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'block_failed_logins_all', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<div class='ipsType_medium ipsType_light ipsType_center'>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_failed_logins', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction ipsNews( $news ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<ul class=\"ipsDataList\">\n\t\nCONTENT;\n\nif ( isset($news)  ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nforeach ( $news as $article ):\n$return .= <<<CONTENT\n\n\t\t<li class=\"ipsDataItem\">\n\t\t\t<span class='ipsDataItem_generic ipsDataItem_size4 ipsType_light ipsType_medium ipsType_right'>\n\t\t\t\t\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\DateTime::ts( strtotime( $article['date'] ) )->relative(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t<\/span>\n\t\t\t<span class=\"ipsDataItem_main\">\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $article['link'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" target=\"_blank\">\n\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $article['title'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/a>\n\t\t\t<\/span>\n\t\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ipsnews_error_generic', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/ul>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction noConnectFailures(  ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsType_medium ipsType_light ipsType_center'>\n\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_failed_connect_requests', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n<\/div>\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction noOnlineUsers(  ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsType_large ipsEmpty'>\n\t<i class='fa fa-group'><\/i>\n\t<br>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_online_users', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n<\/div>\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction onlineAdmins( $admins ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( !empty( $admins ) ):\n$return .= <<<CONTENT\n\n\t<ul class='ipsDataList ipsDataList_reducedSpacing' >\n\t\nCONTENT;\n\nforeach ( $admins as $admin  ):\n$return .= <<<CONTENT\n\n\t\t<li class='ipsDataItem' itemprop=\"itemListElement\">\n\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t<h4 class='ipsDataItem_title'><a href='\nCONTENT;\n$return .= htmlspecialchars( $admin['user']->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' target='_blank'>\nCONTENT;\n$return .= htmlspecialchars( $admin['user']->name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a><\/h4>\n\t\t\t\t<p class='ipsDataItem_meta'>\n\t\t\t\t\t\nCONTENT;\n\n$val = ( $admin['session']['session_running_time'] instanceof \\IPS\\DateTime ) ? $admin['session']['session_running_time'] : \\IPS\\DateTime::ts( $admin['session']['session_running_time'] );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nif ( $admin['user'] != \\IPS\\Member::loggedIn() and $admin['session']['session_location'] != \"app=core&module=system&controller=login\" ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsDataItem_modCheck'>\n\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( preg_replace( '\/adsess=([a-zA-Z0-9]+?)&\/', 'adsess=' . session_id() . '&', preg_replace( '\/csrfKey=([a-zA-Z0-9]+?)&\/', '&', $admin['session']['session_url'] ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class='fa fa-arrow-right fa-2x'><\/i><\/a>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction onlineUsers( $online, $chart ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( count( $online ) > 0 ):\n$return .= <<<CONTENT\n\n\t{$chart}\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<div class='ipsType_center ipsType_light ipsType_large'>\n\t\t<i class='fa fa-group ipsType_huge'><\/i>\n\t\t<br>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_online_users', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction registrations( $chart ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n{$chart}\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction widgetWrapper( $blockHtml, $info ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<li data-widgetKey='\nCONTENT;\n$return .= htmlspecialchars( $info['key'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-widgetName='\nCONTENT;\n$return .= htmlspecialchars( $info['name'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t<div class='ipsAreaBackground_light acpWidget_item'>\n\t\t<h2 class='ipsType_sectionTitle ipsType_reset ipsTruncate ipsTruncate_line'>\n\t\t\t<ul class='ipsList_reset ipsList_inline acpWidget_tools'>\n\t\t\t\t<li>\n\t\t\t\t\t<noscript>\n\t\t\t\t\t\t<input type='text' value='\nCONTENT;\n\nif ( isset($info['position']) ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $info['position'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n0\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' class='acpWidget_manualReorder'>\n\t\t\t\t\t<\/noscript>\n\t\t\t\t\t<a href='#' class='acpWidget_reorder ipsJS_show ipsCursor_drag' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'reorder_widget', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-bars'><\/i><\/a>\n\t\t\t\t<\/li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href='#' class='acpWidget_close' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'close_widget', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-times'><\/i><\/a>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t\t\nCONTENT;\n\n$val = \"block_{$info['key']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t<\/h2>\n\t\t<div class='ipsPad' data-role=\"widgetContent\">\n\t\t\t{$blockHtml}\n\t\t<\/div>\n\t<\/div>\n<\/li>\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
